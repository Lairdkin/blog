<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>Docker入门笔记（一） - 萝卜炖鱼丸</title><meta name="Description" content=""><meta property="og:title" content="Docker入门笔记（一）" />
<meta property="og:description" content="如今，如果你作为一个开发者而不知道容器化技术，那你可能要反思一下自己了，作为计算机领域发展最快最热门的技术之一，容器成为了现代互联网服务架构的基石。 2013年DotCloud发布了容器服务Docker，并在2015年发布了其第一个正式版本，同年国内的Daocloud和灵雀云等公司开始提供基于docker的云服务业务，正是在此机会下我有幸接触了当时还非常先进的" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-05-28T01:56:47&#43;08:00" />
<meta property="article:modified_time" content="2018-05-28T01:56:47&#43;08:00" /><meta property="og:site_name" content="萝卜炖鱼丸" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Docker入门笔记（一）"/>
<meta name="twitter:description" content="如今，如果你作为一个开发者而不知道容器化技术，那你可能要反思一下自己了，作为计算机领域发展最快最热门的技术之一，容器成为了现代互联网服务架构的基石。 2013年DotCloud发布了容器服务Docker，并在2015年发布了其第一个正式版本，同年国内的Daocloud和灵雀云等公司开始提供基于docker的云服务业务，正是在此机会下我有幸接触了当时还非常先进的"/>
<meta name="application-name" content="RadishCloud">
<meta name="apple-mobile-web-app-title" content="RadishCloud"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/manifest.json"><link rel="canonical" href="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" /><link rel="prev" href="https://radish.cloud/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" /><link rel="next" href="https://radish.cloud/posts/%E5%B8%B8%E7%94%A8jdbcurl%E6%A0%BC%E5%BC%8F/" /><link rel="stylesheet" href="/lib/normalize/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"><link rel="stylesheet" href="/lib/animate/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Docker入门笔记（一）",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/radish.cloud\/posts\/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0\/"
        },"genre": "posts","keywords": "docker, java","wordcount":  3996 ,
        "url": "https:\/\/radish.cloud\/posts\/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0\/","datePublished": "2018-05-28T01:56:47+08:00","dateModified": "2018-05-28T01:56:47+08:00","publisher": {
            "@type": "Organization",
            "name": "萝卜炖鱼丸"},"author": {
                "@type": "Person",
                "name": "萝卜炖鱼丸"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : '' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="萝卜炖鱼丸">萝卜炖鱼丸</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/links/"> 友情链接 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/Lairdkin/blog" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item language" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                        <select class="language-select" id="language-select-desktop" onchange="location = this.value;"><option value="/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" selected>简体中文</option></select>
                    </a><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="萝卜炖鱼丸">萝卜炖鱼丸</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/links/" title="">友情链接</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/Lairdkin/blog" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a><a href="javascript:void(0);" class="menu-item" title="选择语言">简体中文<i class="fas fa-chevron-right fa-fw"></i>
                    <select class="language-select" onchange="location = this.value;"><option value="/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" selected>简体中文</option></select>
                </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
    <h2 class="toc-title">目录</h2>
    <div class="toc-content" id="toc-content-auto"></div>
</div><article class="page single"><h1 class="single-title animated flipInX">Docker入门笔记（一）</h1><div class="post-meta">
        <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel=" author" class="author"><i class="fas fa-user-circle fa-fw"></i>萝卜炖鱼丸</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/%E7%AC%94%E8%AE%B0/"><i class="far fa-folder fa-fw"></i>笔记</a></span></div>
        <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-05-28">2018-05-28</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3996 字&nbsp;
            <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 8 分钟&nbsp;<span id="/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" class="leancloud_visitors" data-flag-title="Docker入门笔记（一）">
                <i class="far fa-eye fa-fw"></i>&nbsp;<span class=leancloud-visitors-count></span><span id="busuanzi_value_page_pv"></span>&nbsp;次阅读
            </span>&nbsp;
        </div>
    </div><div class="details toc" id="toc-static" kept="">
        <div class="details-summary toc-title">
            <span>目录</span>
            <span><i class="details-icon fas fa-angle-right"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#docker-概述">Docker 概述</a>
      <ul>
        <li><a href="#什么是docker">什么是Docker</a></li>
        <li><a href="#为什么选择docker">为什么选择docker</a>
          <ul>
            <li><a href="#更高效的利用系统资源">更高效的利用系统资源</a></li>
            <li><a href="#更快的启动时间">更快的启动时间</a></li>
            <li><a href="#运行环境一致性">运行环境一致性</a></li>
            <li><a href="#持续交付和部署">持续交付和部署</a></li>
            <li><a href="#更轻松的维护和拓展">更轻松的维护和拓展</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#docekr的镜像与容器">Docekr的镜像与容器</a>
      <ul>
        <li><a href="#环境">环境</a></li>
        <li><a href="#镜像">镜像</a>
          <ul>
            <li><a href="#获取镜像">获取镜像</a></li>
            <li><a href="#列出镜像">列出镜像</a></li>
            <li><a href="#删除镜像">删除镜像</a></li>
            <li><a href="#构建镜像">构建镜像</a></li>
          </ul>
        </li>
        <li><a href="#容器">容器</a>
          <ul>
            <li><a href="#运行">运行</a></li>
            <li><a href="#终止容器">终止容器</a></li>
            <li><a href="#删除容器">删除容器</a></li>
            <li><a href="#其他操作">其他操作</a>
              <ul>
                <li><a href="#导出容器">导出容器</a></li>
              </ul>
            </li>
            <li><a href="#导入容器">导入容器</a></li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
</nav></div>
    </div><div class="content" id="content">
        <div class="details admonition tip open">
            <div class="details-summary admonition-title"><i class="icon fas fa-lightbulb fa-fw"></i>友情提示<i
                    class="details-icon fas fa-angle-right fa-fw"></i></div>
            <div class="details-content">
                <div class="admonition-content">📌提示：想获得第一手更新？加入<i class="fab fa-telegram-plane"></i> <a
                        href="https://t.me/radishkin_blog">Telegram 频道</a>获得博客更新推送，或者点击页面 <i class="fas fa-rss"></i>
                    按钮订阅博客</div>
            </div>
        </div><p>如今，如果你作为一个开发者而不知道容器化技术，那你可能要反思一下自己了，作为计算机领域发展最快最热门的技术之一，容器成为了现代互联网服务架构的基石。<br>
2013年DotCloud发布了容器服务Docker，并在2015年发布了其第一个正式版本，同年国内的Daocloud和灵雀云等公司开始提供基于docker的云服务业务，正是在此机会下我有幸接触了当时还非常先进的容器化技术（其实我当时对容器化还没有任何概念）。Docker在当时给我留下了最大的印象就是启动快，部署非常快，并且我当时参照daocloud官方提供的教程构建了一些镜像，不过当时的我，只是把Docker作为了一种新奇好玩的玩具，而没有深入的了解和使用。<br>
时间转到今天，随着微服务的兴起，容器化技术已经成为了微服务架构中的重要基石，docker对我来说不再是一个玩具，而是重要的开发部署工具，从今天起，我将重新开始学习docker,并用一系列文章来记录我学习过程。</p>
<h2 id="docker-概述">Docker 概述</h2>
<h3 id="什么是docker">什么是Docker</h3>
<p>虽然Docker及其背后代表的容器化技术已经非常热门了，但是容器化并不是什么新技术，于1979年出现的Chroot Jailb被认为是Dcoker技术的起源，也就是现代Linux系统中的chroot环境，下面列出的一些都是早期的容器服务：</p>
<ul>
<li>Chroot Jail</li>
<li>FreeBSD Jails</li>
<li>Linux VServer</li>
<li>Solaris Containers</li>
<li>OpenVZ</li>
<li>Process Containers</li>
<li>LXC</li>
<li>Warden</li>
<li>LMCTFY</li>
<li>Docker</li>
<li>RKT</li>
</ul>
<p>正如我们所看到的，docker 并不是第一个容器化技术，但它的确是最知名的一个。Docker 诞生于 2013 年，并获得了快速的发展。</p>
<p>所以到底什么是Docker呢？</p>
<p>我们看看书本上的说法：</p>
<blockquote>
<p>Docker使用Google公司推出的Go语言进行开发实现，基于 Linux内核的cgroup，namespace，以及AUFS类的Union FS 等技术，对进程进行封装隔离，属于操作系统层面的虚拟化技术。由于隔离的进程独立于宿主和其它的隔离的进程，因此也称其为容器。最初实现是基于LXC，从0.7以后开始去除LXC，转而使用自行开发的libcontainer，从1.11开始，则进一步演进为使用runC和containerd。<br>
Docker在容器的基础上，进行了进一步的封装，从文件系统、网络互联到进程隔离等等，极大的简化了容器的创建和维护。使得 Docker 技术比虚拟机技术更为轻便、快捷。</p>
</blockquote>
<p>实际上docker本质上就是一种虚拟化技术，与传统的虚拟化技术不同的是，他没有在虚拟化环境中虚拟出一个完整的操作系统内核，而是将虚拟化环境中的进程放在物理机内核中执行,这就是docker容器化的核心。这种方式使docker具有了很多传统虚拟化方式没有的优势。</p>
<h3 id="为什么选择docker">为什么选择docker</h3>
<h4 id="更高效的利用系统资源">更高效的利用系统资源</h4>
<p>由前文我们知道，dcoker容器内的程序本质上就是宿主机上运行的进程，这样就极大减小了性能的损耗，由于不需要模拟内核和周边硬件，也节省了这部分的性能损耗</p>
<h4 id="更快的启动时间">更快的启动时间</h4>
<p>docker容器本质就是一个个宿主机内核程序，所以启动较快</p>
<h4 id="运行环境一致性">运行环境一致性</h4>
<p>Docker 的镜像提供了除内核外完整的运行时环境，确保了应用运行环境一致性</p>
<h4 id="持续交付和部署">持续交付和部署</h4>
<p>使用 Docker 可以通过定制应用镜像来实现持续集成、持续交付、部署。开发人员可以通过 Dockerfile 来进行镜像构建，并结合 持续集成(Continuous Integration) 系统进行集成测试，而运维人员则可以直接在生产环境中快速部署该镜像，甚至结合持续部署(Continuous Delivery/Deployment) 系统进行自动部署。</p>
<h4 id="更轻松的维护和拓展">更轻松的维护和拓展</h4>
<p>Docker 使用的分层存储以及镜像的技术，使得应用重复部分的复用更为容易</p>
<h2 id="docekr的镜像与容器">Docekr的镜像与容器</h2>
<p>首先我们了解三个Docker的基本概念</p>
<ul>
<li>镜像（Image）</li>
<li>容器（Container）</li>
<li>仓库（Repository）</li>
</ul>
<p>这三个概念组成了Docker的完整生命周期，我们将在下面的过程中详细介绍</p>
<h3 id="环境">环境</h3>
<p>如今，Docker可以运行在所有的主流操作系统上，包括Linux，Windows，MacOSX，因为我平时喜欢使用Linux，本文将在Linux上部署和使用，我将使用我的笔记本电脑和一台Daocloud胶囊主机来完成本文的内容</p>
<ul>
<li>本地环境：Manjaro Linux18.0+Docker18.09.0-ce,</li>
<li><del>远程主机环境：Ubuntu14.04+(因为写作到这的时候断网了就放弃远程环境了)</del></li>
</ul>
<p>在Manjaro安装Docker非常简单，在终端输入：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">sudo Pacman -S docker-ce
</code></pre></td></tr></table>
</div>
</div><p><del>即可安装，并无需额外配置</del><br>
启动Docker服务</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">systemctl start docker 
</code></pre></td></tr></table>
</div>
</div><p>检查Docker版本</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ docker --version
Docker version 18.09.0-ce, build 4d60db472b
</code></pre></td></tr></table>
</div>
</div><p>Docker就安装好了</p>
<h3 id="镜像">镜像</h3>
<p>首先我们将了解Docker最核心的概念之一：镜像。镜像是Docker特殊的文件存储形式，其中储存了Linux运行时的用户空间，根据Linux的设计，Linux分为内核和用户空间，宿主机为Docker容器运行提供了内核支持，而Linux镜像为Docker运行提供了用户空间的支持。除了Linux的用户空间外，Docker镜像还储存了一些为运行时准备的一些配置参数（如匿名卷、环境变量、用户等），Docker镜像不包含任何动态数据，构建完成后不会被改变。</p>
<p>由于docker使用了UnionFS技术，所以Docker实现了分层储存的特性，镜像并非是一个完整的“镜像”文件，而是一种抽象概念，在存储中，Docker镜像根据构建顺序依次完成储存，不同的镜像可以共享其中的中间层，大大减小了Docker镜像的体积。</p>
<h4 id="获取镜像">获取镜像</h4>
<p>Docker运行前需要对应的镜像，所以我们可以从镜像仓库拉取镜像，Docker默认的镜像仓库是DockerHub，其中内置了大量高质量的Dokcer基础镜像，我们也可以将自己的镜像发布至DockerHub</p>
<blockquote>
<p>前文我们提到了仓库（Repository）的概念，仓库是一个集中存储和分发镜像的服务，一个 Docker Registry 中可以包含多个仓库（Repository）；每个仓库可以包含多个标签（Tag）；每个标签对应一个镜像。我们可以部署只自己仓库，也可以使用公共的仓库服务。</p>
</blockquote>
<p>获取镜像使用<code>docker pull</code>命令：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">docker pull <span class="o">[</span>选项<span class="o">]</span> <span class="o">[</span>Docker Registry地址<span class="o">]</span>&lt;仓库名&gt;:&lt;标签&gt;
</code></pre></td></tr></table>
</div>
</div><p>如没有仓库地址名，将使用默认的仓库。
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ sudo docker pull node:latest
latest: Pulling from library/node
54f7e8ac135a: Already exists 
d6341e30912f: Already exists 
087a57faf949: Already exists 
5d71636fb824: Pull complete 
0c1db9598990: Pull complete 
89669bc2deb2: Pull complete 
647616206038: Pull complete 
64f67f03205b: Pull complete 
Digest: sha256:fed3f48ec9e97a57c17977ff120c3e7bf7d2d4e930ef650bba3f2ada5ac4a33a
Status: Downloaded newer image for node:latest
</code></pre></td></tr></table>
</div>
</div><p>这个命令将在Docker的中央仓库下载一个最新版本的Nodejs镜像</p>
<h4 id="列出镜像">列出镜像</h4>
<p>我们可以使用<code>docker images</code>列出所有本地的镜像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ docker images
REPOSITORY                        TAG                 IMAGE ID            CREATED             SIZE
docker-test                       0.0.1               ce25b22437c5        9 days ago          443MB
node                              latest              37f455de4837        9 days ago          894MB
tomcat                            latest              48dd385504b1        9 days ago          475MB
ubuntu                            latest              93fd78260bd1        3 weeks ago         86.2MB
fabric8/java-jboss-openjdk8-jdk   1.2.3               7a2a8001c977        23 months ago       422MB
</code></pre></td></tr></table>
</div>
</div><p>列表包含了仓库名、标签、镜像 ID、创建时间以及所占用的空间。</p>
<p>docker分层构建的方式产生了大量的中间层镜像，docker默认只显示最外层的镜像，我们可以通过以下命令查看</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ docker images -a 
</code></pre></td></tr></table>
</div>
</div><p>此外<code>docker images</code>还可以通过一些条件来查看镜像：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash"><span class="c1"># 查看特定仓库名的镜像</span>
$ sudo docker images ubuntu 
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE
ubuntu              latest              93fd78260bd1        <span class="m">3</span> weeks ago         86.2MB

<span class="c1"># 使用过滤器查看镜像</span>
<span class="c1"># 从某个镜像开始的所有镜像</span>
sudo docker images -f <span class="nv">since</span><span class="o">=</span>ubuntu
<span class="c1"># 查看特点标签的镜像</span>
docker images -f <span class="nv">label</span><span class="o">=</span>com.example.version<span class="o">=</span>0.1

<span class="c1"># 使用Go语言模板制定输出格式</span>
$ docker images --format <span class="s2">&#34;table {{.ID}}\t{{.Repository}}\t{{.Tag
</span><span class="s2">}}&#34;</span>

</code></pre></td></tr></table>
</div>
</div><h4 id="删除镜像">删除镜像</h4>
<p>当我们不需要某个镜像的时候，我们可以选择删除镜像，使用<code>docker rmi</code>命令即可删除镜像
例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">$ sudo docker rmi tomcat:latest
</code></pre></td></tr></table>
</div>
</div><h4 id="构建镜像">构建镜像</h4>
<p>使用DockerFile构建镜像将在下一篇文章中详细展开</p>
<h3 id="容器">容器</h3>
<p>如果你熟悉面向对象的开发的话，你可能更容易理解镜像与容器之间的关系。镜像就是面向对象中的类，而容器就是实例，容器就是实例化的镜像，容器是动态的。如前文所述，容器的实质是宿主机中的进程，但与直接在宿主执行的进程不同，容器进程运行于属于自己的独立的命名空间,容器内的进程是隔离与宿主机环境的。</p>
<h4 id="运行">运行</h4>
<p>当我们有了镜像之后，我们就可以运行我们的镜像并建立新的容器（实例）,docker使用<code>docker run</code> 命令来运行容器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">
$ sudo docker run -it --rm ubuntu /bin/bash    
root@d332f4d5aecb:/# cat /etc/os-release 
<span class="nv">NAME</span><span class="o">=</span><span class="s2">&#34;Ubuntu&#34;</span>
<span class="nv">VERSION</span><span class="o">=</span><span class="s2">&#34;18.04.1 LTS (Bionic Beaver)&#34;</span>
<span class="nv">ID</span><span class="o">=</span>ubuntu
<span class="nv">ID_LIKE</span><span class="o">=</span>debian
<span class="nv">PRETTY_NAME</span><span class="o">=</span><span class="s2">&#34;Ubuntu 18.04.1 LTS&#34;</span>
<span class="nv">VERSION_ID</span><span class="o">=</span><span class="s2">&#34;18.04&#34;</span>
<span class="nv">HOME_URL</span><span class="o">=</span><span class="s2">&#34;https://www.ubuntu.com/&#34;</span>
<span class="nv">SUPPORT_URL</span><span class="o">=</span><span class="s2">&#34;https://help.ubuntu.com/&#34;</span>
<span class="nv">BUG_REPORT_URL</span><span class="o">=</span><span class="s2">&#34;https://bugs.launchpad.net/ubuntu/&#34;</span>
<span class="nv">PRIVACY_POLICY_URL</span><span class="o">=</span><span class="s2">&#34;https://www.ubuntu.com/legal/terms-and-policies/privacy-policy&#34;</span>
<span class="nv">VERSION_CODENAME</span><span class="o">=</span>bionic
<span class="nv">UBUNTU_CODENAME</span><span class="o">=</span>bionic
root@d332f4d5aecb:/# <span class="nb">exit</span>
<span class="nb">exit</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>&ndash;it ：这是两个参数，一个是 -i ：交互式操作，一个是 -t 终端。我们这里打算进入 bash 执行一些命令并查看返回结果，因此我们需要交互式终获取镜像终端。</li>
<li>&ndash;rm ：这个参数是说容器退出后随之将其删除。默认情况下，为了排障需求，退出的容器并不会立即删除，除非手动 docker rm 。我们这里只是随便执行个命令，看看结果，不需要排障和保留结果，因此使用 &ndash;rm 可以避免浪费空间。</li>
<li>ubuntu:14.04 ：这是指用 ubuntu:14.04 镜像为基础来启动容器。
/bin/bash ：放在镜像名后的是命令，这里我们希望有个交互式 Shell，因此用的是 bash 。</li>
</ul>
<p>当利用 <code>docker run</code> 来创建容器时，Docker 在后台运行的标准操作包括：</p>
<ul>
<li>检查本地是否存在指定的镜像，不存在就从公有仓库下载
启动</li>
<li>利用镜像创建并启动一个容器</li>
<li>分配一个文件系统，并在只读的镜像层外面挂载一层可读写层</li>
<li>从宿主主机配置的网桥接口中桥接一个虚拟接口到容器中去</li>
<li>从地址池配置一个 ip 地址给容器</li>
<li>执行用户指定的应用程序</li>
<li>执行完毕后容器被终止</li>
</ul>
<p>我们可以使用<code>-d</code>参数使容器在后台运行，例如：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ sudo docker run -d ubuntu /bin/sh -c &#34;while true; do echo hello world; sleep 1; done&#34;
77b2dc01fe0f3f1265df143181e7b9af5e05279a884f4776ee75350ea9d8017a
</code></pre></td></tr></table>
</div>
</div><p>使用<code>docker ps</code> 可以查看docker容器运行状态</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ sudo docker ps
</code></pre></td></tr></table>
</div>
</div><p>希望获取docker日志信息</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker logs 77b2dc01
</code></pre></td></tr></table>
</div>
</div><h4 id="终止容器">终止容器</h4>
<p>当我们需要终止容器时可以使用<code>docker stop</code> 命令,当容器z中的应用终止时，容器也会自动终止，可以使用<code>docker ps -a </code>查看中止的容器，终止的容器可以用<code>docker start</code>来重新启动,同理，<code>docker restart</code> 将会将容器重启</p>
<h4 id="删除容器">删除容器</h4>
<p>可以使用 <code>docker rm</code> 来删除一个处于终止状态的容器。 例如</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$sudo docker rm trusting_newton
trusting_newton
</code></pre></td></tr></table>
</div>
</div><p>如果要删除一个运行中的容器，可以添加<code>-f</code>参数。Docker 会发送 <code>SIGKILL</code>
信号给容器。</p>
<p>使用如下命令可以终结全部处于终止状态的容器</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">docker rm $(docker ps -a -q)
</code></pre></td></tr></table>
</div>
</div><h4 id="其他操作">其他操作</h4>
<h5 id="导出容器">导出容器</h5>
<p>如果要导出本地某个容器，可以使用 <code>docker export </code> 命令。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-fallback" data-lang="fallback">$ sudo docker export 3f6&gt;java.tar
</code></pre></td></tr></table>
</div>
</div><h4 id="导入容器">导入容器</h4>
<p>导出的本地镜像可以用<code>docker import</code>命令来导入</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-bash" data-lang="bash">cat ubuntu.tar <span class="p">|</span> sudo docker import - test/ubuntu:v1.0
</code></pre></td></tr></table>
</div>
</div><p>下一篇文章，我们讲讲解docker构建镜像的常见方式</p>
<blockquote>
<p>参考<br>
<a href="https://d.ljmx.top/Docker%e6%8a%80%e6%9c%af%e5%85%a5%e9%97%a8%e4%b8%8e%e5%ae%9e%e6%88%98%2B%e7%ac%ac2%e7%89%88.pdf" target="_blank" rel="noopener noreffer">杨保华,戴王剑，曹亚伦-Docker技术入门与实战第二版</a><br>
<a href="https://www.cnblogs.com/along21/p/9183609.html" target="_blank" rel="noopener noreffer">alonghub-Docker的发展历程</a></p>
</blockquote>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2018-05-28</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-title="Docker入门笔记（一）" data-hashtags="docker,java"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-title="Docker入门笔记（一）"><i data-svg-src="/lib/simple-icons/icons/line.min.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-title="Docker入门笔记（一）" data-ralateuid="1910759497"><i class="fab fa-weibo fa-fw"></i></a><a href="javascript:void(0);" title="分享到 百度" data-sharer="baidu" data-url="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-title="Docker入门笔记（一）"><i data-svg-src="/lib/simple-icons/icons/baidu.min.svg"></i></a><a href="javascript:void(0);" title="分享到 Evernote" data-sharer="evernote" data-url="https://radish.cloud/posts/docker%E5%85%A5%E9%97%A8%E7%AC%94%E8%AE%B0/" data-title="Docker入门笔记（一）"><i class="fab fa-evernote fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/docker/">docker</a>,&nbsp;<a href="/tags/java/">java</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" class="prev" rel="prev" title="Hexo博客搭建"><i class="fas fa-angle-left fa-fw"></i>Hexo博客搭建</a>
            <a href="/posts/%E5%B8%B8%E7%94%A8jdbcurl%E6%A0%BC%E5%BC%8F/" class="next" rel="next" title="[转载]常用jdb_curl格式">[转载]常用jdb_curl格式<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
<div id="comments" style="padding: 2rem 0 2rem!important;"><div id="utterances"></div><noscript>
                Please enable JavaScript to view the comments powered by <a href="https://utteranc.es/">Utterances</a>.
            </noscript></div></article></div>
            </main><footer class="footer">
        
        <div class="footer-container">
        
            <div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2018 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">萝卜炖鱼丸</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span><span class="icp-splitter">&nbsp;|&nbsp;</span><br class="icp-br"/>
                    <span class="icp"><a href='https://beian.miit.gov.cn/'>蒙ICP备14003205号</a></span></div><div class="footer-line">站点部署于<b><a href="//pages.github.com">GIthub Pages</a></b>，由<b><a href="//cloudflare.com">Cloudflare</b></b>提供加速</div><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.83.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div></br>
            
        </div>
        
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="/lib/katex/katex.min.css"><link rel="stylesheet" href="/lib/katex/copy-tex.min.css"><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script type="text/javascript" src="/lib/smooth-scroll/smooth-scroll.min.js"></script><script type="text/javascript" src="/lib/autocomplete/autocomplete.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript" src="/lib/sharer/sharer.min.js"></script><script type="text/javascript" src="/lib/katex/katex.min.js"></script><script type="text/javascript" src="/lib/katex/auto-render.min.js"></script><script type="text/javascript" src="/lib/katex/copy-tex.min.js"></script><script type="text/javascript" src="/lib/katex/mhchem.min.js"></script><script type="text/javascript" src="/lib/cookieconsent/cookieconsent.min.js"></script><script type="text/javascript" src="/js/tata.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"pathname","label":"blog_comment","lightTheme":"github-light","repo":"Lairdkin/blog"}},"cookieconsent":{"content":{"dismiss":"同意","link":"了解更多","message":"本网站使用 Cookies 来改善您的浏览体验."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script><script src="./foo.js"></script>


<script type="module">
    import { Workbox } from './workbox-window.prod.mjs'

    console.log("loading Customer Javascript file...")

    let flag = false;

    function createUIPrompt(opts) {
        tata.info("检测到新的更新", "<a id='update' style='color:#455760;' href='javascript:void(0);'>点击此处进行更新<a>", {
            position: "bm",
            duration: 8000,
            animate:"slide"

        })
        document.getElementById("update").addEventListener("click", () => {
            flag = true
            if (flag) {
                opts.onAccept();
                tata.success('更新成功', '页面即将刷新', {
                    holding: true,
                    position: "bm"
                })
            }
        })
    }

    if ('serviceWorker' in navigator) {
        const wb = new Workbox('/sw.js');
        let registration;

        const showSkipWaitingPrompt = (event) => {
            
            
            
            
            

            
            
            const prompt = createUIPrompt({
                onAccept: () => {
                    
                    
                    
                    wb.addEventListener('controlling', (event) => {
                        window.location.reload();
                    });

                    wb.messageSkipWaiting();
                },

                onReject: () => {
                    prompt.dismiss();
                }
            });
        };

        
        
        wb.addEventListener('waiting', showSkipWaitingPrompt);

        wb.register();
    }
</script></body>
</html>
