<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="站点描述">
<title>
Springboot快速上手 - RaidishCloud
</title>



        
        <meta property="og:title" content="Springboot快速上手 - RaidishCloud" />
<meta property="og:type" content="website" />
<meta property="og:description" content="站点描述"/>
<meta property="og:url" content="https://radish.cloud/blog/springboot%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/"/>
<meta property="og:site_name" content="RaidishCloud"/>







        
<link rel="shortcut icon" href="/img/fav.ico">


        





<link rel="stylesheet" href="/css/main.min.3679995ba0ed4b91edeef430fd34cce1e8b53c123f9993c4861941eee80b46b1.css" integrity="sha256-NnmZW6DtS5Ht7vQw/TTM4ei1PBI/mZPEhhlB7ugLRrE=" crossorigin="anonymous" media="screen">




    <link rel="stylesheet" href="/foo.css" integrity="" crossorigin="anonymous" media="screen">

        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero  fade-in one ">
                

<h1 class="bold-title is-1">博客</h1>


            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">主页</a>
            

            
            

            
                
            

            
                
            

            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://radish.cloud/projects/">
                  
                  
                  项目
                  
                  
                  </a>
                
                
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://radish.cloud/blog/">
                  
                  返回 博客
                  
                  </a>
                
                
            
            
            
            

            
            
            <a class="navbar-item" href="/#contact">联系我</a>
            
            

            
            
            
            
            <a class="navbar-item" href="https://radish.cloud/en/">English</a>
            
            

            
            
        </div>
    </nav>
    <hr>
</div>



                
<div class="container">
    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://radish.cloud/blog/springboot%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/">Springboot快速上手</a>
    </h2>
    <div class="post-data">
        May 28, 2018 |
        2 分钟
    </div>
    
    <div class="blog-share">
        分享:
        
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Springboot%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b%20https%3a%2f%2fradish.cloud%2fblog%2fspringboot%25E5%25BF%25AB%25E9%2580%259F%25E4%25B8%258A%25E6%2589%258B%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fab fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>
        
        
        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fradish.cloud%2fblog%2fspringboot%25E5%25BF%25AB%25E9%2580%259F%25E4%25B8%258A%25E6%2589%258B%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fab fa-facebook-f"></i>
            <span class="hidden">Facebook</span>
        </a>
        
        
        <a class="icon-pinterest" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fradish.cloud%2fblog%2fspringboot%25E5%25BF%25AB%25E9%2580%259F%25E4%25B8%258A%25E6%2589%258B%2f&amp;description=Springboot%e5%bf%ab%e9%80%9f%e4%b8%8a%e6%89%8b" onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
            <i class="fab fa-pinterest-p"></i>
            <span class="hidden">Pinterest</span>
        </a>
        
    </div>
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      
     <p>
         Tags: 
          
           <a href="/tags/java">
             java</a>,
         
           <a href="/tags/springboot">
             Springboot</a>
         
        </p>
      
    
      
    
</div>

<div class="container markdown top-pad">
    <p>Springboot是由spring开发团队Pivotal推出的全新框架，他设计目的简化繁琐的Spring配置,专注于应用的开发。SpringBoot采用了&quot;约定优先于配置（COC，Convnetion Over Configuration）&ldquo;的设计思想，通过为企业开发应用环境设计出了很多自动配置的依赖模块,这些模块几乎不需要配置，开箱即用，极大的简化了开发周期和代码量。</p>
<!-- toc -->

<h3 id="环境" class="anchor-link"><a href="#%e7%8e%af%e5%a2%83">环境</a></h3>
<p>本文开发环境以写作时的最新版本<code>2.1.0.RELEASE</code>为基准</p>
<ul>
<li>JDK1.8及以上</li>
<li>Maven 3.2</li>
<li>Tomcat 8及以上</li>
<li>hibernate 5.2以上</li>
</ul>
<p>使用最新版idea可以快速创建一个springboot项目并初始化一些模块，如果不使用idea，可以新建Maven项目并从官网下载并定制所需组件</p>

<h3 id="项目maven依赖" class="anchor-link"><a href="#%e9%a1%b9%e7%9b%aemaven%e4%be%9d%e8%b5%96">项目Maven依赖</a></h3>
<p>我们使用Maven作为项目的的依赖管理，有关Maven的内容可以查看网上的其他相关信息，下面列出了项目所有使用的模块</p>
<p>继承Springboot的核心依赖</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;parent&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-parent<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;version&gt;</span>2.1.0.RELEASE<span style="color:#062873;font-weight:bold">&lt;/version&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;relativePath/&gt;</span> <span style="color:#60a0b0;font-style:italic">&lt;!-- lookup parent from repository --&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/parent&gt;</span>
</code></pre></div><p>jpa</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-data-jpa<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>web核心组件</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-web<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>mysql ,如果mysql-server版本是8.0需要指明connector版本8.0+</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>mysql<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>mysql-connector-java<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;scope&gt;</span>runtime<span style="color:#062873;font-weight:bold">&lt;/scope&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>lmbok，减少代码量</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.projectlombok<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>lombok<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;optional&gt;</span>true<span style="color:#062873;font-weight:bold">&lt;/optional&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>Springboot 测试模块，默认使用junit</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>org.springframework.boot<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>spring-boot-starter-test<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;scope&gt;</span>test<span style="color:#062873;font-weight:bold">&lt;/scope&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div><p>swagger</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-xml" data-lang="xml"><span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>io.springfox<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>springfox-swagger2<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;version&gt;</span>2.2.2<span style="color:#062873;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>

<span style="color:#062873;font-weight:bold">&lt;dependency&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;groupId&gt;</span>io.springfox<span style="color:#062873;font-weight:bold">&lt;/groupId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;artifactId&gt;</span>springfox-swagger-ui<span style="color:#062873;font-weight:bold">&lt;/artifactId&gt;</span>
	<span style="color:#062873;font-weight:bold">&lt;version&gt;</span>2.2.2<span style="color:#062873;font-weight:bold">&lt;/version&gt;</span>
<span style="color:#062873;font-weight:bold">&lt;/dependency&gt;</span>
</code></pre></div>
<h3 id="工程目录结构" class="anchor-link"><a href="#%e5%b7%a5%e7%a8%8b%e7%9b%ae%e5%bd%95%e7%bb%93%e6%9e%84">工程目录结构</a></h3>
<p>然后我们查看下项目生成的默认文件结构</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ tree                
.
├── mvnw
├── mvnw.cmd
├── pom.xml
├── src
│   ├── main
│   │   ├── java
│   │   │   └── top/ljmx/springboot/demo/demo
│   │   │       └── DemoApplication.java
│   │   └── resources
│   │       ├── application.properties
│   │       ├── static
│   │       └── templates
│   └── <span style="color:#007020">test</span>
│       └── java
│           └── top/ljmx/springboot/demo/demo
│               └── DemoApplicationTests.java
└── srpingboot-sdemo.iml

<span style="color:#40a070">18</span> directories, <span style="color:#40a070">7</span> files
</code></pre></div><p><code>src</code>是项目的主文件夹，其中<code>main</code>是主要代码，<code>test</code>是测试代码，这是一个典型的Maven工程的文件结构，<code>pom.xml</code>是Maven的依赖文件。<code>main</code>先分为<code>java</code>和<code>resources</code>，<code>java</code>存放代码，<code>resources</code>存放静态资源，目录中的<code>application.properties</code>是工程的配置文件</p>
<p>Springboot遵循springMVC的分层结构结构，所以我们先在包<code>top.ljmx.springboot.demo.demo</code>下新建以下几个子包</p>
<ul>
<li>controller 存放所有的控制器代码</li>
<li>model 存放所有的数据模型</li>
<li>repository 存放所有的数据操作</li>
<li>service 业务代码</li>
</ul>
<p>其他可选包</p>
<ul>
<li>config 存放配置代码，如swagger</li>
<li>util 存放工具类</li>
<li>expection 统一异常处理</li>
</ul>

<h3 id="一个简单的springboot入门实例" class="anchor-link"><a href="#%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84springboot%e5%85%a5%e9%97%a8%e5%ae%9e%e4%be%8b">一个简单的Springboot入门实例</a></h3>
<blockquote>
<p>本实例参照库米云微王华杰老师课程代码</p>
</blockquote>
<p>本实例实现了一套登陆与注册接口，并使用slflog收集日志，并用swagger2提供文档和测试服务</p>
<p>编辑<code>resources</code>目录下的<code>application.properties</code>文件</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#60a0b0;font-style:italic">#tomcat config</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>server.port = 8080<span style="color:#bbb">
</span><span style="color:#bbb"></span>server.tomcat.uri-encoding = utf-8<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">#Mysql</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.datasource.driver-class-name = com.mysql.cj.jdbc.Driver<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">#配置mysql驱动</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.datasource.url = jdbc:mysql://localhost:3306/test?useUnicode=true&amp;characterEncoding=utf8&amp;serverTimezone=GMT%2B8<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">#serverTimezone=GMT%2B8是解决运行中出现f服务器时区无法识别的异常的</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.datasource.username = root<span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.datasource.password = ***********<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">#jpa</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.jpa.database = mysql<span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.jpa.show-sql = true<span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.jpa.hibernate.ddl-auto = update<span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.jpa.hibernate.naming.physical-strategy = org.springframework.boot.orm.jpa.hibernate.SpringPhysicalNamingStrategy<span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#60a0b0;font-style:italic">#数据库方言mysql</span><span style="color:#bbb">
</span><span style="color:#bbb"></span>spring.jpa.properties.hibernate.dialect = org.hibernate.dialect.MySQL5Dialect<span style="color:#bbb">
</span><span style="color:#bbb">
</span></code></pre></div><p>然后在MySQL中新建一个名叫test的数据库</p>
<p>然后先新建一个用户实体类，在model包下新建一个User.java,写入以下内容</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">package</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.model</span><span style="color:#666">;</span>

<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">lombok.Data</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.persistence.Entity</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">javax.persistence.*</span><span style="color:#666">;</span>

<span style="color:#555;font-weight:bold">@Entity</span>   <span style="color:#60a0b0;font-style:italic">//声明数据实体类
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#555;font-weight:bold">@Data</span>   <span style="color:#60a0b0;font-style:italic">//产生setter，getter方法
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">User</span> <span style="color:#666">{</span>
    <span style="color:#555;font-weight:bold">@Id</span>
    <span style="color:#60a0b0;font-style:italic">//标识主键
</span><span style="color:#60a0b0;font-style:italic"></span>    <span style="color:#555;font-weight:bold">@GeneratedValue</span><span style="color:#666">(</span>strategy <span style="color:#666">=</span> GenerationType<span style="color:#666">.</span><span style="color:#4070a0">IDENTITY</span><span style="color:#666">)</span>
    <span style="color:#007020;font-weight:bold">private</span> Integer keyid<span style="color:#666">;</span>

    <span style="color:#007020;font-weight:bold">private</span> String userName<span style="color:#666">;</span>
    <span style="color:#007020;font-weight:bold">private</span> String phoneNumber<span style="color:#666">;</span>
    <span style="color:#007020;font-weight:bold">private</span> String password<span style="color:#666">;</span>

<span style="color:#666">}</span>
</code></pre></div><p>可以在该类添加@table注解可以指定自动生成的表的类名</p>
<p>然后基于JPA实现DAO层（数据操作层，就是repository包），新建一个UserRepositoty的类，代码如下</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="color:#007020;font-weight:bold">package</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.repositoty</span><span style="color:#666">;</span>

<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.data.jpa.repository.Query</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.model.User</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.stereotype.Repository</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.data.jpa.repository.JpaRepository</span><span style="color:#666">;</span>

<span style="color:#555;font-weight:bold">@Repository</span>
<span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">interface</span> <span style="color:#0e84b5;font-weight:bold">UserRepositoty</span> <span style="color:#007020;font-weight:bold">extends</span> JpaRepository<span style="color:#666">&lt;</span>User<span style="color:#666">,</span>Integer<span style="color:#666">&gt;{</span>
    <span style="color:#555;font-weight:bold">@Query</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;select a from User a where a.phoneNumber=?1&#34;</span><span style="color:#666">)</span>
    User <span style="color:#06287e">getByPhoneNumber</span><span style="color:#666">(</span>String phoneNumber<span style="color:#666">);</span>

<span style="color:#666">}</span>

</code></pre></div><p>需要解释的是，Spring Data JPA提供了很多持久层接口，例如<code>Repository</code>,<code>CrudRepositoty</code>,<code>PagingAndSortingRepository</code> 以及<code>JpaRepository</code> 接口。其中<code>Repository</code>为基类，<code>JpaRepository</code>继承自<code>PagingAndSortingRepository</code>接口，两个泛型参数分别代表Java POJO类以及主键数据类型。我们创建自己的数据库操作接口时，只需继承上述JPA提供的某个接口，即可自动继承相关数据操作方法，而不需要再次实现。例如<code>CrudRepositoty</code>提供了对增删改查操作的实现，<code>PagingAndSortingRepository</code>提供了分页查询方法的实现。另外JPA提供了一套命名规则例如<code>readBy()</code>等，这些方法也只需要用户申明而由JPA自动实现了。如果这仍不能满足业务需求，也可以自定义SQL查询语句，例如上述代码所示，采用@Query标签,我们之后将开设单独的一章讲解JPA</p>
<p>最后实现控制器类，在包 <code>controller</code>中新建UserController类</p>
<div class="highlight"><pre style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">
<span style="color:#007020;font-weight:bold">package</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.controller</span><span style="color:#666">;</span>

<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.beans.factory.annotation.Autowired</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">org.springframework.web.bind.annotation.*</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.model.User</span><span style="color:#666">;</span>
<span style="color:#007020;font-weight:bold">import</span> <span style="color:#0e84b5;font-weight:bold">top.ljmx.demo.repositoty.UserRepositoty</span><span style="color:#666">;</span>

<span style="color:#60a0b0;font-style:italic">//Spring组合注解,声明Rest接口
</span><span style="color:#60a0b0;font-style:italic"></span><span style="color:#555;font-weight:bold">@RestController</span>
<span style="color:#007020;font-weight:bold">public</span> <span style="color:#007020;font-weight:bold">class</span> <span style="color:#0e84b5;font-weight:bold">UserController</span> <span style="color:#666">{</span>
    <span style="color:#555;font-weight:bold">@Autowired</span>
    <span style="color:#60a0b0;font-style:italic">//自动装配成员变量
</span><span style="color:#60a0b0;font-style:italic"></span>    <span style="color:#007020;font-weight:bold">private</span> UserRepositoty userRepositoty<span style="color:#666">;</span>

    <span style="color:#555;font-weight:bold">@ApiOperation</span><span style="color:#666">(</span>value <span style="color:#666">=</span> <span style="color:#4070a0">&#34;注册&#34;</span><span style="color:#666">)</span>
    <span style="color:#555;font-weight:bold">@RequestMapping</span><span style="color:#666">(</span>value <span style="color:#666">=</span> <span style="color:#4070a0">&#34;/user/register&#34;</span><span style="color:#666">,</span>method <span style="color:#666">=</span> RequestMethod<span style="color:#666">.</span><span style="color:#4070a0">GET</span><span style="color:#666">)</span>
    <span style="color:#60a0b0;font-style:italic">//地址映射，并指定请求方法
</span><span style="color:#60a0b0;font-style:italic"></span>    <span style="color:#007020;font-weight:bold">public</span> Object <span style="color:#06287e">register</span><span style="color:#666">(</span>
            <span style="color:#555;font-weight:bold">@RequestParam</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;username&#34;</span><span style="color:#666">)</span> String userName<span style="color:#666">,</span>
            <span style="color:#555;font-weight:bold">@RequestParam</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;phonenumber&#34;</span><span style="color:#666">)</span> String phoneNumber<span style="color:#666">,</span>
            <span style="color:#555;font-weight:bold">@RequestParam</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;password&#34;</span><span style="color:#666">)</span> String password<span style="color:#666">){</span>
            <span style="color:#60a0b0;font-style:italic">//参数列表
</span><span style="color:#60a0b0;font-style:italic"></span>        User user <span style="color:#666">=</span> <span style="color:#007020;font-weight:bold">new</span> User<span style="color:#666">();</span>
        user<span style="color:#666">.</span><span style="color:#4070a0">setUserName</span><span style="color:#666">(</span>userName<span style="color:#666">);</span>
        user<span style="color:#666">.</span><span style="color:#4070a0">setPhoneNumber</span><span style="color:#666">(</span>phoneNumber<span style="color:#666">);</span>
        user<span style="color:#666">.</span><span style="color:#4070a0">setPassword</span><span style="color:#666">(</span>password<span style="color:#666">);</span>

        <span style="color:#007020;font-weight:bold">try</span> <span style="color:#666">{</span>
            userRepositoty<span style="color:#666">.</span><span style="color:#4070a0">save</span><span style="color:#666">(</span>user<span style="color:#666">);</span>
            <span style="color:#60a0b0;font-style:italic">//实例化对象
</span><span style="color:#60a0b0;font-style:italic"></span>        <span style="color:#666">}</span><span style="color:#007020;font-weight:bold">catch</span> <span style="color:#666">(</span>Exception e<span style="color:#666">){</span>
            <span style="color:#007020;font-weight:bold">return</span> <span style="color:#4070a0">&#34;注册失败&#34;</span><span style="color:#666">;</span>
        <span style="color:#666">}</span>
        <span style="color:#007020;font-weight:bold">return</span> <span style="color:#4070a0">&#34;注册成功&#34;</span><span style="color:#666">;</span>

    <span style="color:#666">}</span>

    <span style="color:#555;font-weight:bold">@RequestMapping</span><span style="color:#666">(</span>value <span style="color:#666">=</span> <span style="color:#4070a0">&#34;/user/login&#34;</span><span style="color:#666">,</span>method <span style="color:#666">=</span> RequestMethod<span style="color:#666">.</span><span style="color:#4070a0">GET</span><span style="color:#666">)</span>
    <span style="color:#007020;font-weight:bold">public</span> Object <span style="color:#06287e">login</span><span style="color:#666">(</span><span style="color:#555;font-weight:bold">@RequestParam</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;phonenumber&#34;</span><span style="color:#666">)</span> String phoneNumber<span style="color:#666">,</span>
                        <span style="color:#555;font-weight:bold">@RequestParam</span><span style="color:#666">(</span><span style="color:#4070a0">&#34;password&#34;</span><span style="color:#666">)</span> String password<span style="color:#666">){</span>
        User user <span style="color:#666">=</span> userRepositoty<span style="color:#666">.</span><span style="color:#4070a0">getByPhoneNumber</span><span style="color:#666">(</span>phoneNumber<span style="color:#666">);</span>
        <span style="color:#007020;font-weight:bold">if</span> <span style="color:#666">(</span>user<span style="color:#666">.</span><span style="color:#4070a0">getPassword</span><span style="color:#666">().</span><span style="color:#4070a0">equals</span><span style="color:#666">(</span>password<span style="color:#666">)){</span>
            <span style="color:#007020;font-weight:bold">return</span> <span style="color:#4070a0">&#34;登录成功&#34;</span><span style="color:#666">;</span>
        <span style="color:#666">}</span><span style="color:#007020;font-weight:bold">else</span> <span style="color:#666">{</span>
            <span style="color:#007020;font-weight:bold">return</span> <span style="color:#4070a0">&#34;登录失败&#34;</span><span style="color:#666">;</span>
        <span style="color:#666">}</span>
    <span style="color:#666">}</span>
<span style="color:#666">}</span>

</code></pre></div><p>这个控制器实现了<code>login</code>和<code>register</code>两个接口,可以模拟简单的登录和注册功能</p>
<p>当我们配置好数据库信息时，
运行main函数，访问<code>http://localhost:8080/user/register?username=mx&amp;phonenumber=1234546&amp;password=123</code>会在数据库中新建一条数据,访问<code>http://localhost:8080/user/login?phonenumber=123454&amp;password=123</code>(数据表里存在的数据)会输出登录正常。</p>
<p>之后的文章会对这个简单的注册登录做更多改进</p>
<blockquote>
<p>参考：https://blog.csdn.net/u013248535/article/details/55100979/</p>
</blockquote>

</div>




<section class="comments">
<script src="https://utteranc.es/client.js"
        repo="Lairdkin/blog"
        issue-term="title"
        theme="preferred-color-scheme"
        crossorigin="anonymous"
        async>
</script>
</section>



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            © 2017-2021 萝卜炖鱼丸 | 蒙ICP备14003205号-2 | <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"><strong>CC BY-SA 4.0</strong></a> 许可 </br> <a href="https://github.com/victoriadrake/hugo-theme-introduction/"><strong>Introduction</strong></a> 主题为 <a href="http://gohugo.io/">Hugo</a> 而设。由开源社群贡献者以 <a href="https://victoria.dev"><i class="fa fa-heart"></i> 和 <i class="fa fa-coffee"></i></a> 创造。
        </span>
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://radish.cloud/js/bundle.f6c977229f84ae8df89c8647befcf3a170b8157f180a3f0afa4620b19a336994.js" integrity="sha256-9sl3Ip&#43;Ero34nIZHvvzzoXC4FX8YCj8K&#43;kYgsZozaZQ="></script>






        
        
        
        
    </body>
</html>
