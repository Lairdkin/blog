<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        
        <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="ç«™ç‚¹æè¿°">
<title>
Hexoåšå®¢æ­å»º - æ— ååšå®¢
</title>



        
        <meta property="og:title" content="Hexoåšå®¢æ­å»º - æ— ååšå®¢" />
<meta property="og:type" content="website" />
<meta property="og:description" content="ç«™ç‚¹æè¿°"/>
<meta property="og:url" content="https://radish.cloud/blog/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/"/>
<meta property="og:site_name" content="æ— ååšå®¢"/>




<meta property="og:image" content="https://radish.cloud/home/mx.jpg"/>




        
<link rel="shortcut icon" href="/img/fav.ico">


        





<link rel="stylesheet" href="/css/main.min.20f701138a49cf7971fe80b1829416789fa588f156b3a6c8c1a09fa03d89a991.css" integrity="sha256-IPcBE4pJz3lx/oCxgpQWeJ&#43;liPFWs6bIwaCfoD2JqZE="
    crossorigin="anonymous" media="screen">







<link rel="stylesheet" href="/foo.css" integrity="" crossorigin="anonymous"
    media="screen">
        
        
        
        
    </head>
    <body>
        <section id="top" class="section">
            
            <div class="container hero  fade-in one ">
                

<h1 class="bold-title is-1">åšå®¢</h1>





            </div>
            
            <div class="section  fade-in two ">
                
<div class="container">
    <hr>
    <nav class="navbar" role="navigation" aria-label="main navigation">
        
        <a role="button" class="navbar-burger" data-target="navMenu" aria-label="menu" aria-expanded="false" >
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
          <span aria-hidden="true"></span>
        </a>
        <div class="navbar-menu " id="navMenu">
            
            
            
            
            <a class="navbar-item" href="/">ä¸»é¡µ</a>
            

            
            

            
                
            

            
                
            

            
            
            
            
            
            <a class="navbar-item" href="/#about">å…³äºæˆ‘</a>
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://radish.cloud/projects/">
                  
                  
                  é¡¹ç›®
                  
                  
                  </a>
                
                
            
            
            
            
            
                
                
                
                
                  <a class="navbar-item" href="https://radish.cloud/blog/">
                  
                  è¿”å›åˆ°-&gt; åšå®¢
                  
                  </a>
                
                
            
            
            
            
            
            <a class="navbar-item" href="/#links">å‹æƒ…é“¾æ¥</a>
            
            
            
            

            
            
            <a class="navbar-item" href="/#contact">è”ç³»æˆ‘</a>
            
            

            
            
            
            
            <a class="navbar-item" href="https://radish.cloud/en/">English</a>
            
            

            
            <a class="navbar-item" href="https://radish.cloud/index.xml"><i class="fas fa-rss"></i></a>
            
            
        </div>
    </nav>
    <hr>
</div>



                


<div class="container">
    
    

    
          <div class="post-toc" id="post-toc">
    <h2 class="post-toc-title"></h2>
    
    <div
        class="post-toc-content always-active">
        
        <nav id="TableOfContents">
  <ul>
    <li><a href="#ç¯å¢ƒ">ç¯å¢ƒ</a></li>
    <li><a href="#éƒ¨ç½²">éƒ¨ç½²</a>
      <ul>
        <li><a href="#hexo-å®‰è£…">Hexo å®‰è£…</a></li>
        <li><a href="#hexoæ–°å»ºç«™ç‚¹å’ŒåŸºæœ¬é…ç½®">Hexoæ–°å»ºç«™ç‚¹å’ŒåŸºæœ¬é…ç½®</a></li>
        <li><a href="#nginx-é…ç½®">Nginx é…ç½®</a></li>
        <li><a href="#webhookå®ç°è‡ªåŠ¨éƒ¨ç½²">webhookå®ç°è‡ªåŠ¨éƒ¨ç½²</a></li>
      </ul>
    </li>
    <li><a href="#å…¶ä»–">å…¶ä»–</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    window.onload = function () {
        var fix = $('.post-toc');
        var end = $('.post-comment');
        var fixTop = fix.offset().top, fixHeight = fix.height();
        var endTop, miss;
        var offsetTop = fix[0].offsetTop;
        $(window).scroll(function () {
            var docTop = Math.max(document.body.scrollTop, document.documentElement.scrollTop);
            if (end.length > 0) {
                endTop = end.offset().top;
                miss = endTop - docTop - fixHeight;
            }
            if (fixTop < docTop) {
                fix.css({ 'position': 'fixed' });
                if ((end.length > 0) && (endTop < (docTop + fixHeight))) {
                    fix.css({ top: miss });
                } else {
                    fix.css({ top: 0 });
                }
            } else {
                fix.css({ 'position': 'absolute' });
                fix.css({ top: offsetTop });
            }
        })
    }
</script>
	
    

    <h2 class="title is-1 top-pad strong-post-title">
        <a href="https://radish.cloud/blog/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">Hexoåšå®¢æ­å»º</a>
    </h2>
    <div class="post-data">
        May 28, 2018 |
        3 åˆ†é’Ÿ
    </div>
    
    <div class="blog-share">
        åˆ†äº«:
        
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet?text=Hexo%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba%20https%3a%2f%2fradish.cloud%2fblog%2f%25E5%258D%259A%25E5%25AE%25A2%25E6%2590%25AD%25E5%25BB%25BA%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
            <i class="fab fa-twitter"></i>
            <span class="hidden">Twitter</span>
        </a>
        
        
        <a class="icon-facebook" href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fradish.cloud%2fblog%2f%25E5%258D%259A%25E5%25AE%25A2%25E6%2590%25AD%25E5%25BB%25BA%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
            <i class="fab fa-facebook-f"></i>
            <span class="hidden">Facebook</span>
        </a>
        
        
        <a class="icon-pinterest" href="http://pinterest.com/pin/create/button/?url=https%3a%2f%2fradish.cloud%2fblog%2f%25E5%258D%259A%25E5%25AE%25A2%25E6%2590%25AD%25E5%25BB%25BA%2f&amp;description=Hexo%e5%8d%9a%e5%ae%a2%e6%90%ad%e5%bb%ba" onclick="window.open(this.href, 'pinterest-share','width=580,height=296');return false;">
            <i class="fab fa-pinterest-p"></i>
            <span class="hidden">Pinterest</span>
        </a>
        

        
    </div>
    
    
      
    
      
    
      
    
      
    
      
    
      
    
      
      
     <p>
         Tags: 
          
           <a href="/tags/hexo">
             Hexo</a>,
         
           <a href="/tags/nodejs">
             nodejs</a>
         
        </p>

        
      
    
      
    
    <div class="" id="">
    <span id="busuanzi_container_page_pv">
        é˜…è¯»é‡:<span id="busuanzi_value_page_pv"></span>æ¬¡
      </span>
    <blockquote>
        <p id="read-times"></p>
    </br>
    </blockquote>
</div>

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js">
</script>
<script type="text/javascript">
    window.onload = function () {
        var fix = $('.section.fade-in.two .container.markdown.top-pad');
        function wordCount(data) {
            var pattern = /[a-zA-Z0-9_\u0392-\u03c9]+|[\u4E00-\u9FFF\u3400-\u4dbf\uf900-\ufaff\u3040-\u309f\uac00-\ud7af]+/g;
            var m = data.match(pattern);
            var count = 0;
            if (m == null) { return count; }
            for (var i = 0; i < m.length; i++) {
                if (m[i].charCodeAt(0) >= 0x4E00) {
                    count += m[i].length;
                } else {
                    count += 1;
                }
            }
            return count;
        }    
        count = wordCount(fix[0].innerText) 
        $('#read-times')[0].innerText = 'ğŸ“Œæç¤ºï¼šæœ¬æ–‡å…±è®¡'+count+'å­—ï¼Œé¢„è®¡ğŸ“°é˜…è¯»æ—¶é—´'+(count/270+1).toFixed(0) +'åˆ†é’Ÿ'
    }
</script>
</div>

<div class="container markdown top-pad">
    
    
    <p>æœ€è¿‘è®°æ€§å®åœ¨æ˜¯ä¸‹é™çš„å‰å®³ï¼Œæçš„ä¸œè¥¿å¤©å¤©å¿˜ï¼Œæ‰€ä»¥æŠŠå’•äº†å¥½å‡ å¹´çš„åšå®¢åˆæ¡èµ·æ¥äº†ï¼Œè¿™æ¬¡é€‰ç”¨äº†Hexoä½œä¸ºåšå®¢çš„å¼•æ“ï¼Œæ”¯æŒmarkdownï¼Œè½»é‡ï¼Œéƒ¨ç½²ç®€å•ï¼Œä¸è¿‡å®‰è£…ä¸­è¿˜æ˜¯è¸©äº†ä¸€äº›å‘ï¼Œç®€å•çš„è®°å½•ä¸‹ï¼ˆå…¶å®å°±æ˜¯åšå®¢å¤ªç©ºæ°´ä¸€ç¯‡2333</p>
<!-- toc -->

<h2 id="ç¯å¢ƒ" class="anchor-link"><a href="#%e7%8e%af%e5%a2%83">ç¯å¢ƒ</a></h2>
<ul>
<li>
<p>æœåŠ¡å™¨ï¼šé˜¿é‡Œäº‘å­¦ç”Ÿæœº è½»é‡çº§åº”ç”¨æœåŠ¡å™¨</p>
</li>
<li>
<p>æœåŠ¡å™¨ç³»ç»Ÿï¼šUbuntu16.04</p>
<p>é˜¿é‡Œäº‘ä¸€ç›´ä¸æä¾›1804çš„é•œåƒï¼Œä½†æ˜¯ä¸æ¨èæ‰‹åŠ¨å‡çº§ï¼Œå®¹æ˜“æŒ‚</p>
</li>
<li>
<p>æœ¬åœ°ç³»ç»Ÿï¼šManjaro 18.0 Illyria</p>
</li>
</ul>

<h2 id="éƒ¨ç½²" class="anchor-link"><a href="#%e9%83%a8%e7%bd%b2">éƒ¨ç½²</a></h2>
<p>Hexoç”Ÿæˆçš„æ˜¯çº¯é™æ€é¡µé¢ï¼Œæ‰€ä»¥éƒ¨ç½²åªéœ€å°†hexoç”Ÿæˆçš„publicç›®å½•æ”¾ç½®åœ¨ nginx ç«™ç‚¹ç›®å½•ä¸‹å°±å¯ä»¥</p>

<h3 id="hexo-å®‰è£…" class="anchor-link"><a href="#hexo-%e5%ae%89%e8%a3%85">Hexo å®‰è£…</a></h3>
<p>å®‰è£…Hexo å‰ç¡®ä¿ç³»ç»Ÿæœ‰ä»¥ä¸‹è½¯ä»¶ï¼š</p>
<ul>
<li>Node.js</li>
<li>Git</li>
</ul>
<p>å› ä¸ºUbuntuæºä¸­æä¾›çš„nodejsç‰ˆæœ¬éå¸¸è€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä½¿ç”¨<img src="https://nodejs.org" alt="nodejs">å®˜ç½‘æä¾›çš„ä¸€ä¸ªå®‰è£…æ–¹å¼æ¥å®‰è£…nodejs</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span># Using Ubuntu
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>curl -sL https://deb.nodesource.com/setup_11.x | sudo -E bash -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>sudo apt-get install -y nodejs
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span># Using Debian, as root
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>curl -sL https://deb.nodesource.com/setup_11.x | bash -
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span>apt-get install -y nodejs
</code></pre></div><p>è¿™ä¸ªè„šæœ¬ä¼šè‡ªåŠ¨è¯†åˆ«ç³»ç»Ÿç‰ˆæœ¬å¹¶æ·»åŠ ppaæº</p>
<p>ç„¶å</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#75715e"># å®‰è£…git</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>sudo apt install git
</code></pre></div><p>å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨æœåŠ¡å™¨ç«¯è°ƒç”¨hexoç”Ÿæˆé™æ€é¡µé¢ï¼Œæ‰€ä»¥æœ¬åœ°åªéœ€è¦å®‰è£…gitå°±å¯ä»¥</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#75715e"># manjaro å®‰è£…git</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>sudo pacman -S git 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span><span style="color:#75715e"># ä¹Ÿå¯ä»¥åœ¨æœ¬åœ°å®‰è£…nodejsï¼Œæ–¹ä¾¿è°ƒè¯•</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>sudo pacman -S nodejs
</code></pre></div><p>ç„¶åå®‰è£…hexo</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span> npm install -g hexo-cli
</code></pre></div><p>æµ‹è¯•ä¸€ä¸‹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>hexo -v
</code></pre></div><p>è¾“å‡º</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>hexo-cli: 1.1.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>os: Linux 4.19.1-1-MANJARO linux x64
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>http_parser: 2.8.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>node: 11.1.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>v8: 7.0.276.32-node.7
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>uv: 1.23.2
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>zlib: 1.2.11
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>ares: 1.15.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>modules: <span style="color:#ae81ff">67</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>nghttp2: 1.34.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>napi: <span style="color:#ae81ff">3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span>openssl: 1.1.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>icu: 63.1
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>unicode: 11.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span>cldr: 34.0
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>tz: 2018e
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>
</code></pre></div><p>Hexo å®‰è£…å®Œæ¯•</p>

<h3 id="hexoæ–°å»ºç«™ç‚¹å’ŒåŸºæœ¬é…ç½®" class="anchor-link"><a href="#hexo%e6%96%b0%e5%bb%ba%e7%ab%99%e7%82%b9%e5%92%8c%e5%9f%ba%e6%9c%ac%e9%85%8d%e7%bd%ae">Hexoæ–°å»ºç«™ç‚¹å’ŒåŸºæœ¬é…ç½®</a></h3>
<p>é€‰æ‹©ä¸€ä¸ªå­˜æ”¾ç«™ç‚¹æ–‡ä»¶çš„ç›®å½•ï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>hexo init â€œç«™ç‚¹åâ€
</code></pre></div><p>hexoä¼šåœ¨å½“å‰ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªç«™ç‚¹æ–‡ä»¶å¤¹ï¼Œcdè¿›ç«™ç‚¹æ–‡ä»¶å¤¹ï¼Œæ‰§è¡Œ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>npm install
</code></pre></div><p>æ‰§è¡Œå®Œæˆåï¼Œç”Ÿæˆç›®å½•å¦‚ä¸‹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>$ tree blog 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span>blog
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span>â”œâ”€â”€ _config.yml
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span>â”œâ”€â”€ db.json
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span>â”œâ”€â”€ node_modules
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>â”œâ”€â”€ package.json
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>â”œâ”€â”€ package-lock.json
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>â”œâ”€â”€ scaffolds
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>â”œâ”€â”€ source
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>â””â”€â”€ themes
</code></pre></div><p>å…¶ä¸­_config.ymlæ˜¯æ•´ä¸ªç«™ç‚¹çš„é…ç½®æ–‡ä»¶ï¼Œsourceæ˜¯å­˜æ”¾æ–‡ç« æ¥æºçš„mdæ–‡ä»¶çš„ï¼Œpackage.jsonå­˜æ”¾äº†ç«™ç‚¹çš„ä¾èµ–ï¼Œthemeæ˜¯ä¸»é¢˜æ–‡ä»¶</p>
<p>åœ¨ç«™ç‚¹æ–‡ä»¶å¤¹å†…ï¼Œä½¿ç”¨</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>hexo g
</code></pre></div><p>ç”Ÿæˆé™æ€æ–‡ä»¶ï¼Œé™æ€æ–‡ä»¶å­˜æ”¾åœ¨è¯¥ç›®å½•çš„<code>public/</code>ä¸‹</p>
<p>ç„¶åç¼–è¾‘_config.yml</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#75715e"># ç«™ç‚¹åŸºæœ¬ä¿¡æ¯</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#f92672">title</span>:  <span style="color:#75715e">#ç«™ç‚¹åç§°</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#f92672">subtitle</span>:  <span style="color:#75715e">#å­æ ‡é¢˜</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#f92672">description</span>: 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span><span style="color:#f92672">keywords</span>: 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span><span style="color:#f92672">author</span>: 
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span><span style="color:#f92672">language</span>: <span style="color:#ae81ff">zh-cn</span> <span style="color:#75715e">#è¯­è¨€è®¾ç½®ä¸ºç®€ä½“ä¸­æ–‡</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span><span style="color:#f92672">timezone</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span><span style="color:#75715e"># ç«™ç‚¹é“¾æ¥é…ç½®</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#f92672">url</span>: <span style="color:#ae81ff">http://ljmx.top</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span><span style="color:#f92672">root</span>: <span style="color:#ae81ff">/</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span><span style="color:#f92672">permalink</span>: :<span style="color:#ae81ff">year/:month/:title.html</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#f92672">permalink_defaults</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span><span style="color:#75715e"># ä¸€äº›é»˜è®¤æ–‡ä»¶çš„é…ç½®</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span><span style="color:#f92672">source_dir</span>: <span style="color:#ae81ff">source</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span><span style="color:#f92672">public_dir</span>: <span style="color:#ae81ff">public</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span><span style="color:#f92672">tag_dir</span>: <span style="color:#ae81ff">tags</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#f92672">archive_dir</span>: <span style="color:#ae81ff">archives</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span><span style="color:#f92672">category_dir</span>: <span style="color:#ae81ff">categories</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span><span style="color:#f92672">code_dir</span>: <span style="color:#ae81ff">downloads/code</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span><span style="color:#f92672">i18n_dir</span>: :<span style="color:#ae81ff">lang</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span><span style="color:#f92672">skip_render</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span><span style="color:#75715e"># ä½¿ç”¨hexo new æ—¶å†™ä½œæ¨¡æ¿</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span><span style="color:#75715e"># å› ä¸ºå¹³æ—¶éƒ½æ˜¯ç›´æ¥æ–°å»ºmdæ–‡ä»¶ï¼Œæ‰€ä»¥è¿™é‡Œä¸€èˆ¬éƒ½ç”¨ä¸ä¸ŠQAQ</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span style="color:#75715e"># </span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span><span style="color:#f92672">new_post_name</span>: :<span style="color:#ae81ff">title.md</span> <span style="color:#75715e"># File name of new posts</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span><span style="color:#f92672">default_layout</span>: <span style="color:#ae81ff">post</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span><span style="color:#f92672">titlecase</span>: <span style="color:#66d9ef">false</span> <span style="color:#75715e"># Transform title into titlecase</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33</span><span style="color:#f92672">external_link</span>: <span style="color:#66d9ef">true</span> <span style="color:#75715e"># Open external links in new tab</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34</span><span style="color:#f92672">filename_case</span>: <span style="color:#ae81ff">0</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35</span><span style="color:#f92672">render_drafts</span>: <span style="color:#66d9ef">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36</span><span style="color:#f92672">post_asset_folder</span>: <span style="color:#66d9ef">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37</span><span style="color:#f92672">relative_link</span>: <span style="color:#66d9ef">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38</span><span style="color:#f92672">future</span>: <span style="color:#66d9ef">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39</span><span style="color:#f92672">highlight</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40</span>  <span style="color:#f92672">enable</span>: <span style="color:#66d9ef">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41</span>  <span style="color:#f92672">line_number</span>: <span style="color:#66d9ef">true</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42</span>  <span style="color:#f92672">auto_detect</span>: <span style="color:#66d9ef">false</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43</span>  <span style="color:#f92672">tab_replace</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44</span>  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45</span><span style="color:#75715e"># ä¸»é¡µè®¾å®šï¼Œè¿™ä¸ªä¸€èˆ¬æ ¹æ®ä¸»é¢˜æ¥ä¿®æ”¹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46</span><span style="color:#f92672">index_generator</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47</span>  <span style="color:#f92672">path</span>: <span style="color:#e6db74">&#39;&#39;</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48</span>  <span style="color:#f92672">per_page</span>: <span style="color:#ae81ff">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49</span>  <span style="color:#f92672">order_by</span>: -<span style="color:#ae81ff">date</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50</span>  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51</span><span style="color:#75715e"># æ ‡ç­¾</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52</span><span style="color:#f92672">default_category</span>: <span style="color:#ae81ff">uncategorized</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53</span><span style="color:#f92672">category_map</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54</span><span style="color:#f92672">tag_map</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56</span><span style="color:#75715e">#æ—¥æœŸæ ¼å¼</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57</span><span style="color:#f92672">date_format</span>: <span style="color:#ae81ff">YYYY-MM-DD</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58</span><span style="color:#f92672">time_format</span>: <span style="color:#ae81ff">HH:mm:ss</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60</span><span style="color:#75715e"># åˆ†é¡µ</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61</span><span style="color:#f92672">per_page</span>: <span style="color:#ae81ff">10</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62</span><span style="color:#f92672">pagination_dir</span>: <span style="color:#ae81ff">page</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64</span><span style="color:#75715e"># æ‹“å±•ï¼Œä¸»é¢˜å’Œæ’ä»¶</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65</span><span style="color:#75715e">## Plugins: https://hexo.io/plugins/</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66</span><span style="color:#75715e">## Themes: https://hexo.io/themes/</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67</span><span style="color:#f92672">theme</span>: <span style="color:#ae81ff">anatole</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69</span><span style="color:#75715e"># Deployment</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70</span><span style="color:#75715e">## Docs: https://hexo.io/docs/deployment.html</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71</span><span style="color:#75715e"># è‡ªåŠ¨éƒ¨ç½²é…ç½®ï¼Œæ²¡ç”¨è¿‡2333</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72</span><span style="color:#f92672">deploy</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73</span>  <span style="color:#f92672">type</span>:
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74</span>
</code></pre></div><p>ç„¶åå¯ä»¥é€‰æ‹©ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ä¸»é¢˜ï¼Œæ”¾åˆ°/theme æ–‡ä»¶å¤¹é‡Œï¼Œåœ¨é…ç½®æ–‡ä»¶themeè¡Œå†™ä¸Šä¸»é¢˜åç§°ï¼Œç”Ÿæˆæ–‡ä»¶å³å¯æ›´æ¢ä¸»é¢˜</p>
<blockquote>
<p>æˆ‘ä»¬ä½¿ç”¨çš„ä¸»é¢˜ä¾èµ– <code>hexo-render-pug</code>æ’ä»¶ï¼Œæ‰€ä»¥å¯ç”¨å‰éœ€è¦æ‰§è¡Œ <code>npm install hexo-render-pug --save</code>å®‰è£…ï¼Œæ‰èƒ½æ­£å¸¸æ¸²æŸ“</p>
</blockquote>

<h3 id="nginx-é…ç½®" class="anchor-link"><a href="#nginx-%e9%85%8d%e7%bd%ae">Nginx é…ç½®</a></h3>
<p>ubuntu1604 å®‰è£…nginx</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>sudo apt install nginx
</code></pre></div><p>æŸ¥çœ‹æœåŠ¡çŠ¶æ€</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>service nginx status
</code></pre></div><p>ActiveçŠ¶æ€æ˜¾ç¤º activeè¯æ˜é…ç½®æ­£å¸¸</p>
<p>ç¼–è¾‘<code>/etc/nginx/nginx.conf</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#75715e">#ä¿®æ”¹ç¬¬ä¸€è¡Œï¼Œå˜æ›´nginxæ‰§è¡Œæƒé™ï¼Œå…¶å®ä¸æ¨èè¿™æ ·åšï¼Œåº”è¯¥ä¿®æ”¹æ–‡ä»¶çš„è®¿é—®æƒé™ï¼Œä½†æ˜¯æˆ‘æ‡’233</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>user root
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span><span style="color:#75715e">#å¢åŠ ä¸€ä¸‹ä¸€è¡Œåˆ°æ–‡ä»¶ä¸­</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>include /etc/nginx/conf.d/*.conf;
</code></pre></div><p>ç„¶ååœ¨<code>/etc/nginx/conf.d</code>ç›®å½•ä¸­æ–°å»ºä¸€ä¸ª<code>ç«™ç‚¹å.conf</code>çš„æ–‡ä»¶ï¼Œç¼–è¾‘è¿™ä¸ªæ–‡ä»¶</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>server <span style="color:#f92672">{</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>    listen 4000;         <span style="color:#75715e"># ç›‘å¬ç«¯å£</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>    server_name ljmx.top;    <span style="color:#75715e"># ç«™ç‚¹åŸŸå</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>    root  /var/www/public;     <span style="color:#75715e"># ç«™ç‚¹æ ¹ç›®å½•,æŒ‡å‘è‡ªå·±ç«™ç‚¹çš„publicæ–‡ä»¶å¤¹</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>    index index.html index.htm index.php;   <span style="color:#75715e"># é»˜è®¤å¯¼èˆªé¡µ</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7</span><span style="color:#f92672">}</span>
</code></pre></div><p>é‡å¯nginx</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>service nginx restart
</code></pre></div>
<h3 id="webhookå®ç°è‡ªåŠ¨éƒ¨ç½²" class="anchor-link"><a href="#webhook%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e9%83%a8%e7%bd%b2">webhookå®ç°è‡ªåŠ¨éƒ¨ç½²</a></h3>
<p>ç°åœ¨åšå®¢éƒ¨ç½²å¥½äº†ï¼Œä½†æ˜¯æˆ‘æ¯æ¬¡å†™å®Œæ–‡ç« ï¼Œpushåˆ°githubï¼Œç„¶åç™»å½•æœåŠ¡å™¨ï¼Œpullä¸‹æ¥ï¼Œæ‰§è¡Œç”Ÿæˆè¯­å¥ï¼Œè¿™æ ·æ¯”è¾ƒç¹çï¼Œæ‰€ä»¥æˆ‘ä»¬çš„webhookå°±ç™»åœºäº†</p>
<p>webhookæ˜¯gitä¸Šçš„ä¸€ä¸ªæœåŠ¡ï¼Œä»–æä¾›äº†ä¸€ç§èƒ½åŠ›ï¼Œå½“ä»“åº“å‘ç”Ÿå˜åŠ¨æ—¶ï¼Œwebhookä¼šè‡ªåŠ¨postä¸€æ®µä¿¡æ¯åˆ°é¢„å…ˆè®¾å®šçš„åœ°å€ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥å®ç°è‡ªåŠ¨åŒ–ç”Ÿæˆå’Œéƒ¨ç½²åšå®¢</p>
<p>åœ¨githubé¡¹ç›®ä¸»é¡µä¸­ï¼Œç‚¹å‡»<code>setting</code>&gt;<code>webhooks</code>ï¼Œç„¶åADDä¸€ä¸ªæ–°çš„webhookï¼ŒPayload URLå¡«å†™æœåŠ¡å™¨ip+ç«¯å£å·+è¯·æ±‚è·¯å¾„ï¼Œè¯·æ±‚ç±»å‹é€‰jsonï¼Œsceretéšä¾¿ç”Ÿæˆï¼Œä½†æ˜¯è¦è®°ä½ã€‚</p>
<p>åœ¨hexoç«™ç‚¹æ ¹ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªå«webhook.jsæ–‡ä»¶ï¼Œ
å¡«å…¥ä»¥ä¸‹å†…å®¹:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">http</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;http&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">createHandler</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;github-webhook-handler&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3</span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">handler</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">createHandler</span>({ <span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/webhooks_push&#39;</span>, <span style="color:#a6e22e">secret</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;&#39;</span> })
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4</span><span style="color:#75715e">// ä¸Šé¢çš„ secret ä¿æŒå’Œ GitHub åå°è®¾ç½®çš„ä¸€è‡´
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5</span><span style="color:#75715e"></span><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">run_cmd</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">args</span>, <span style="color:#a6e22e">callback</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6</span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">spawn</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">require</span>(<span style="color:#e6db74">&#39;child_process&#39;</span>).<span style="color:#a6e22e">spawn</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7</span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">child</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">spawn</span>(<span style="color:#a6e22e">cmd</span>, <span style="color:#a6e22e">args</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8</span>  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">resp</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;&#34;</span>;
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9</span>  <span style="color:#a6e22e">child</span>.<span style="color:#a6e22e">stdout</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;data&#39;</span>, <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">buffer</span>) { <span style="color:#a6e22e">resp</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">buffer</span>.<span style="color:#a6e22e">toString</span>(); });
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10</span>  <span style="color:#a6e22e">child</span>.<span style="color:#a6e22e">stdout</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;end&#39;</span>, <span style="color:#66d9ef">function</span>() { <span style="color:#a6e22e">callback</span> (<span style="color:#a6e22e">resp</span>) });
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12</span><span style="color:#a6e22e">handler</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;error&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">err</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13</span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error:&#39;</span>, <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14</span>})
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15</span><span style="color:#a6e22e">handler</span>.<span style="color:#a6e22e">on</span>(<span style="color:#e6db74">&#39;push&#39;</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">event</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16</span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#39;Received a push event for %s to %s&#39;</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17</span>    <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">repository</span>.<span style="color:#a6e22e">name</span>,
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18</span>    <span style="color:#a6e22e">event</span>.<span style="color:#a6e22e">payload</span>.<span style="color:#a6e22e">ref</span>);
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19</span>    <span style="color:#a6e22e">run_cmd</span>(<span style="color:#e6db74">&#39;sh&#39;</span>, [<span style="color:#e6db74">&#39;./deploy.sh&#39;</span>], <span style="color:#66d9ef">function</span>(<span style="color:#a6e22e">text</span>){ <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">text</span>) });
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20</span>})
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21</span><span style="color:#66d9ef">try</span> {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22</span>  <span style="color:#a6e22e">http</span>.<span style="color:#a6e22e">createServer</span>(<span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23</span>    <span style="color:#a6e22e">handler</span>(<span style="color:#a6e22e">req</span>, <span style="color:#a6e22e">res</span>, <span style="color:#66d9ef">function</span> (<span style="color:#a6e22e">err</span>) {
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24</span>      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">statusCode</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">404</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25</span>      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">end</span>(<span style="color:#e6db74">&#39;no such location&#39;</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26</span>    })
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27</span>  }).<span style="color:#a6e22e">listen</span>(<span style="color:#ae81ff">6000</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28</span>  <span style="color:#75715e">//å¯ä»¥åœ¨è¿™ä¿®æ”¹ç›‘å¬ç«¯å£å·
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29</span><span style="color:#75715e"></span>}<span style="color:#66d9ef">catch</span>(<span style="color:#a6e22e">err</span>){
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30</span>  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">error</span>(<span style="color:#e6db74">&#39;Error:&#39;</span>, <span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>)
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31</span>}
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32</span>
</code></pre></div><p>åœ¨ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªdeploy.shçš„æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹å†…å®¹</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span><span style="color:#75715e">#å¡«å…¥markdownæ–‡ä»¶æ‰€åœ¨ä½ç½®</span>
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2</span>cd /root/website/myblog/source
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3</span>git reset --hard
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4</span>git pull origin master  
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5</span>hexo generate
<span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6</span>
</code></pre></div><p>ç„¶åå®‰è£…ä¾èµ–ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>npm install github-webhook-handler --save
</code></pre></div><p>è¿è¡Œ</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1</span>node webhook.js
</code></pre></div><p>å¯ä»¥ä½¿ç”¨pm2ï¼Œæˆ–è€…nohupç­‰æ–¹å¼å®ˆæŠ¤è¿›ç¨‹</p>
<p>è¿™æ ·å½“æäº¤pull requestçš„æ—¶å€™ï¼ŒæœåŠ¡å™¨å°±ä¼šè‡ªåŠ¨ç”Ÿæˆé™æ€æ–‡ä»¶å¹¶éƒ¨ç½²äº†</p>

<h2 id="å…¶ä»–" class="anchor-link"><a href="#%e5%85%b6%e4%bb%96">å…¶ä»–</a></h2>
<p>å› ä¸ºæ—¶é—´åŒ†å¿™ï¼ˆå…¶å®å°±æ˜¯æ‡’ï¼Œæ‰€ä»¥å¾ˆå¤šä¸œè¥¿è¿˜æ²¡æœ‰å®Œå–„ï¼Œç•™ç»™ä¸‹ç¯‡åšæ–‡å§</p>
<p>å¾…å®Œæˆ</p>
<ul>
<li><input disabled="" type="checkbox"> ä¿®æ”¹åšå®¢æ¨¡æ¿</li>
<li><input disabled="" type="checkbox"> å…¨ç«™ssl</li>
<li><input disabled="" type="checkbox"> è®¿é—®ç»Ÿè®¡</li>
<li><input disabled="" type="checkbox"> èµ„æºæ–‡ä»¶å¤¹</li>
<li><input disabled="" type="checkbox"> å¤šç”¨æˆ·</li>
</ul>

</div>




<section class="comments">
        <div class="comments_loading">
                <i class="fa fa-spinner fa-pulse fa-2x"></i>
                <p style="margin-top: 5px;">è¯„è®ºåŠ è½½ä¸­</p>
        </div>
        <script src="https://utterances.radish.cloud/client.js" 
                repo="Lairdkin/blog"
                issue-term="pathname" 
                theme="preferred-color-scheme"
                crossorigin="anonymous" async>
        </script>

</section>



                
                <div class="container">
    <hr>
</div>
<div class="container has-text-centered top-pad">
    <a href="#top">
        <i class="fa fa-arrow-up"></i>
    </a>
</div>

<div class="container">
    <hr>
</div>

                <div class="section" id="footer">
    <div class="container has-text-centered">
    
        <span class="footer-text">
            Â© 2017-2021 èåœç‚–é±¼ä¸¸ | è’™ICPå¤‡14003205å·-2 | <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh"><strong>CC BY-SA 4.0</strong></a> è®¸å¯</br> ç«™ç‚¹éƒ¨ç½²äº<a href="https://pages.github.com/"><strong>GIthub Pages</strong></a>ï¼Œç”±<a href="cloudflare.com"><strong>Cloudflare</strong></a>æä¾›åŠ é€Ÿ</br> <a href="https://github.com/victoriadrake/hugo-theme-introduction/"><strong>Introduction</strong></a> ä¸»é¢˜ä¸º <a href="http://gohugo.io/">Hugo</a> è€Œè®¾ã€‚ç”±å¼€æºç¤¾ç¾¤è´¡çŒ®è€…ä»¥ <a href="https://victoria.dev"><i class="fa fa-heart"></i> å’Œ <i class="fa fa-coffee"></i></a> åˆ›é€ ã€‚
        </span>
    
    </div>
</div>

                
            </div>
        </section>
        
        


<script src="https://radish.cloud/js/bundle.f6c977229f84ae8df89c8647befcf3a170b8157f180a3f0afa4620b19a336994.js" integrity=""></script>









        
        
        
        
    </body>
</html>
